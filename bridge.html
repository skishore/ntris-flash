<html>
<head>
<style type="text/css">
#socket_bridge {
  height: 1px;
  width: 1px;
  position: absolute;
  top: -1px;
  left: -1px;
}
</style>
<head>
<body onload="onload();">
<object id="socket_bridge" data="socket_bridge.swf" type="application/x-shockwave-flash"></object>
<script type="text/javascript">
var socket;
function test() {
  socket = new FlashSocket({
    on_connect: function() {
      console.log('Connected!');
      s.sendLine('<connection-made>')
    },
    on_data: function(data) {
      console.log(data);
    },
    on_close: function() {
      console.log('Lost connection.');
    },
    on_io_error: function(err) {
      console.log('IO error: ', err);
    },
    on_security_error: function(err) {
      console.log('Security error: ', err);
    },
  });
  socket.sendLine = function(message) {
    s.write(message + '\0');
  };
  socket.connect('127.0.0.1', '2045');
}
function onload() {
  setTimeout(test, 1000);
}
</script>
</body>
</html>
